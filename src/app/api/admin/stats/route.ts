import { NextResponse } from "next/server"; import { getServerSession } from "next-auth/next"; import { authOptions } from "@/lib/auth"; import { getDashboardStats } from "@/lib/db"; export async function GET() { const session = await getServerSession(authOptions); if (!session || session.user.role !== "ADMIN") { return NextResponse.json({ error: "No autorizado" }, { status: 403 }); } try { const stats = await getDashboardStats(); return NextResponse.json(stats); } catch (error) { console.error("Error al obtener estadísticas:", error); return NextResponse.json({ error: "Error al obtener estadísticas" }, { status: 500 }); } }
